<div class="page-content">
  <header class="page-header">
    <h1 class="page-title">{{ pageTitle }}</h1>
    <p class="page-subtitle">{{ pageSubtitle }}</p>
  </header>

  <div class="stats-grid mb-6">
    <div class="stat-card">
      <div class="stat-icon stat-icon-blue">
        <svg fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
          <path d="M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm2 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"/>
        </svg>
      </div>
      <div class="stat-content">
        <p class="stat-label">Total Logs</p>
        <p class="stat-value stat-value-blue">{{ logStats.total }}</p>
      </div>
    </div>

    <div class="stat-card">
      <div class="stat-icon stat-icon-green">
        <svg fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
          <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>
        </svg>
      </div>
      <div class="stat-content">
        <p class="stat-label">CREATE Actions</p>
        <p class="stat-value stat-value-green">{{ logStats.create }}</p>
      </div>
    </div>

    <div class="stat-card">
      <div class="stat-icon stat-icon-blue">
        <svg fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
          <path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/>
        </svg>
      </div>
      <div class="stat-content">
        <p class="stat-label">UPDATE Actions</p>
        <p class="stat-value stat-value-blue">{{ logStats.update }}</p>
      </div>
    </div>

    <div class="stat-card">
      <div class="stat-icon stat-icon-red">
        <svg fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
          <path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/>
        </svg>
      </div>
      <div class="stat-content">
        <p class="stat-label">DELETE Actions</p>
        <p class="stat-value stat-value-red">{{ logStats.delete }}</p>
      </div>
    </div>
  </div>

  <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6">
    <h3 class="text-lg font-semibold text-gray-900 mb-4">Search & Filters</h3>
    
    <form [formGroup]="filterForm" (ngSubmit)="onFilterChange()">
      <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
        <div class="relative">
          <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
            <svg class="h-5 w-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
            </svg>
          </div>
          <input
            type="text"
            formControlName="search"
            placeholder="Search logs..."
            class="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none"
          />
        </div>

        <div>
          <select
            formControlName="module"
            (change)="onFilterChange()"
            class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white outline-none appearance-none cursor-pointer"
          >
            @for (module of modules; track module) {
              <option [value]="module">{{ module }}</option>
            }
          </select>
        </div>

        <div>
          <select
            formControlName="action"
            (change)="onFilterChange()"
            class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white outline-none appearance-none cursor-pointer"
          >
            @for (action of actions; track action) {
              <option [value]="action">{{ action }}</option>
            }
          </select>
        </div>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div>
          <label for="startDate" class="block text-sm font-medium text-gray-700 mb-2">
            Start Date
          </label>
          <div class="relative">
            <input
              type="date"
              id="startDate"
              formControlName="startDate"
              (change)="onFilterChange()"
              class="w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none"
            />
            <div class="absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none">
              <svg class="h-5 w-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
              </svg>
            </div>
          </div>
        </div>

        <div>
          <label for="endDate" class="block text-sm font-medium text-gray-700 mb-2">
            End Date
          </label>
          <div class="relative">
            <input
              type="date"
              id="endDate"
              formControlName="endDate"
              (change)="onFilterChange()"
              class="w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none"
            />
            <div class="absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none">
              <svg class="h-5 w-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
              </svg>
            </div>
          </div>
        </div>
      </div>
    </form>
  </div>

  <div class="content-area">
    <div class="bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden">
      <div class="overflow-x-auto">
        <table class="w-full border-collapse">
          <thead>
            <tr class="border-b-2 border-gray-200 bg-gray-50">
              <th class="text-left py-3 px-4 font-semibold text-gray-700 uppercase text-sm">TIMESTAMP</th>
              <th class="text-left py-3 px-4 font-semibold text-gray-700 uppercase text-sm">USER</th>
              <th class="text-left py-3 px-4 font-semibold text-gray-700 uppercase text-sm">ROLE</th>
              <th class="text-left py-3 px-4 font-semibold text-gray-700 uppercase text-sm">ACTION</th>
              <th class="text-left py-3 px-4 font-semibold text-gray-700 uppercase text-sm">MODULE</th>
              <th class="text-left py-3 px-4 font-semibold text-gray-700 uppercase text-sm">DETAILS</th>
              <th class="text-left py-3 px-4 font-semibold text-gray-700 uppercase text-sm">IP ADDRESS</th>
            </tr>
          </thead>

          <tbody>
            @if (isLoading) {
              <tr>
                <td colspan="7" class="py-8 text-center text-gray-500">
                  <div class="flex items-center justify-center">
                    <svg class="animate-spin h-5 w-5 mr-3 text-purple-600" fill="none" viewBox="0 0 24 24">
                      <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                      <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                    </svg>
                    Loading logs...
                  </div>
                </td>
              </tr>
            } @else if (logs.length === 0) {
              <tr>
                <td colspan="7" class="py-8 text-center text-gray-500">
                  No logs found
                </td>
              </tr>
            } @else {
              @for (log of logs; track log.id || log.timestamp) {
                <tr class="border-b border-gray-100 hover:bg-gray-50 transition-colors">
                  <td class="py-4 px-4 text-gray-700">
                    {{ formatTimestamp(log.timestamp) }}
                  </td>

                  <td class="py-4 px-4 text-gray-900 font-medium">
                    {{ log.user || 'N/A' }}
                  </td>

                  <td class="py-4 px-4">
                    <span [class]="'inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ' + getRoleBadgeClass(log.role)">
                      {{ log.role || 'N/A' }}
                    </span>
                  </td>

                  <td class="py-4 px-4">
                    <span [class]="'inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ' + getActionBadgeClass(log.action)">
                      {{ log.action || 'N/A' }}
                    </span>
                  </td>

                  <td class="py-4 px-4 text-gray-700">
                    {{ log.module || 'N/A' }}
                  </td>

                  <td class="py-4 px-4 text-gray-700">
                    {{ log.details || 'N/A' }}
                  </td>

                  <td class="py-4 px-4 text-gray-700 font-mono text-sm">
                    {{ log.ipAddress || 'N/A' }}
                  </td>
                </tr>
              }
            }
          </tbody>
        </table>
      </div>
    </div>

    @if (totalPages > 1) {
      <div class="mt-6 flex items-center justify-between">
        <div class="text-sm text-gray-700">
          Showing {{ getDisplayRange() }} logs
        </div>
        <div class="flex gap-2">
          <button
            (click)="onPreviousPage()"
            [disabled]="currentPage === 1"
            class="px-4 py-2 border border-gray-300 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 transition-colors"
          >
            Previous
          </button>
          <button
            (click)="onNextPage()"
            [disabled]="currentPage === totalPages"
            class="px-4 py-2 border border-gray-300 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 transition-colors"
          >
            Next
          </button>
        </div>
      </div>
    }
  </div>
</div>

